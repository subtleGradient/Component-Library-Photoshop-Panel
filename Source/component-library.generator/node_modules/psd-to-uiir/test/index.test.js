require('tap').test(function tap(t){
  
  var Convert = require('../')
  
  t.test('exists', function tap(t){
    t.is(typeof Convert, 'function')
    t.end()
  })
  
  var psd = require('./test/stuff/psd')
  
  t.test('works', function tap(t){
    
    var pushable = {
      push: function(command){
        console.log(command)
      }
    }
    
    Convert(psd, pushable)
    
    t.end()
  })
  
  t.test('works', function tap(t){
    
    var fs = require('fs')
    // var writeStream = fs.createWriteStream(process.env.HOME + '/Desktop/psd.framer.js')
    var writeStream = fs.createWriteStream('/Users/aylott/Dropbox/Work/Simple States-assets/psd.framer.js')
    
    var pushable = {
      push: function(command){
        if (pushable.indent) writeStream.write(pushable.indent)
        writeStream.write(command.split('\n').join('\n' + pushable.indent))
        writeStream.write('\n')
      }
    }
    
    pushable.push('PSD = new View;')
    
    pushable.push('PSD.State1 = function(PSD){')
    pushable.indent = '\t'
    pushable.push('if (!PSD) PSD = this')
    Convert(require(process.env.HOME + '/Desktop/psd1.json'), pushable)
    pushable.push('return PSD')
    pushable.indent = ''
    pushable.push('}')
    
    pushable.push('PSD.State2 = function(PSD){')
    pushable.indent = '\t'
    pushable.push('if (!PSD) PSD = this')
    Convert(require(process.env.HOME + '/Desktop/psd2.json'), pushable)
    pushable.push('return PSD')
    pushable.indent = ''
    pushable.push('}')
    
    pushable.push('PSD.State3 = function(PSD){')
    pushable.indent = '\t'
    pushable.push('if (!PSD) PSD = this')
    Convert(require(process.env.HOME + '/Desktop/psd3.json'), pushable)
    pushable.push('return PSD')
    pushable.indent = ''
    pushable.push('}')
    
    pushable.push('PSD.State1()')
    t.end()
  })
  
})
